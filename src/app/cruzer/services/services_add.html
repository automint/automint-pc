<div id="page_content">
    <div id="page_content_inner">

        <div class="md-card uk-margin-large-bottom">
            <div class="md-card-content">
                <form class="uk-form-stacked" novalidate>
                    <wizard on-finish="serviceFormVm.save()" template="app/templates/wizard.tpl.html">
                        <wz-step wz-title="Customer Information" template="app/templates/wizard.step.tpl.html">
                            <div class="uk-grid">
                                <div class="uk-width-medium-1-1 parsley-row">
                                    <label for="wizard_customer_name" class="uk-form-label">Customer Name&nbsp;<span class="req uk-text-danger">*</span></label>
                                    <select ng-disabled="serviceFormVm.operationMode == 'edit'" kendo-combo-box ng-model="serviceFormVm.user.name" id="wizard_customer_name" ng-blur="serviceFormVm.fillUserDetails()" k-placeholder="'Customer Name'" k-data-text-field="'key'" k-data-value-field="'id'" k-filter="'contains'" k-auto-bind="false" k-min-length="1" k-data-source="serviceFormVm.possibleUsersList" style="width:100%">
                                    </select>
                                </div>
                            </div>
                            <div class="uk-grid">
                                <div class="uk-width-medium-1-2 parsley-row">
                                    <div class="uk-input-group">
                                        <span class="uk-input-group-addon">
                                            <a href="#"><i class="material-icons">&#xE0CD;</i></a>
                                        </span>
                                        <label for="wizard_phone">Phone Number</label>
                                        <input ng-disabled="serviceFormVm.operationMode == 'edit' || serviceFormVm.user.id != ''" type="text" class="md-input" name="wizard_phone" id="wizard_phone" required md-input ng-model="serviceFormVm.user.mobile" />
                                    </div>
                                </div>
                                <div class="uk-width-medium-1-2 parsley-row">
                                    <div class="uk-input-group">
                                        <span class="uk-input-group-addon">
                                            <a href="#"><i class="material-icons">&#xE0BE;</i></a>
                                        </span>
                                        <label for="wizard_email">Email</label>
                                        <input ng-disabled="serviceFormVm.operationMode == 'edit' || serviceFormVm.user.id != ''" type="text" class="md-input" name="wizard_email" id="wizard_email" md-input ng-model="serviceFormVm.user.email" />
                                    </div>
                                </div>
                            </div>
                            <div class="uk-clearfix uk-margin-large-top">
                                <button class="md-btn md-btn-flat md-btn-flat-primary uk-float-right" id="button_customer_details_forward" type="submit" wz-next>Continue</button>
                            </div>
                        </wz-step>
                        <wz-step wz-title="Vehicle information" template="app/templates/wizard.step.tpl.html" canenter="serviceFormVm.validateCustomer">
                            <div class="uk-grid" ng-if="serviceFormVm.operationMode == 'add'">
                                <div class="uk-width-medium-1-1 parsley-row">
                                    <label class="uk-form-label" for="kUI_dropdown_basic_select">Choose from existing:</label>
                                    <select kendo-drop-down-list k-data-text-field="'name'" k-data-value-field="'name'" k-data-source="serviceFormVm.possibleVehiclesList" style="width: 100%" id="kUI_dropdown_basic_select" ng-model="serviceFormVm.currentVehicle" ng-change="serviceFormVm.fillVehicleDetails()">
                                    </select>
                                </div>
                            </div>
                            <div class="uk-grid">
                                <div class="uk-width-medium-1-3 parsley-row">
                                    <label class="uk-form-label">Choose manufacturer:</label>
                                    <input ng-disabled="serviceFormVm.operationMode == 'edit' || serviceFormVm.vehicle.id" kendo-auto-complete name="wizard_manufacturer" ng-model="serviceFormVm.vehicle.manuf" k-data-source="serviceFormVm.countryNames" k-placeholder='"Select manufacturer ..."' class="uk-width-1-1" style="min-width: 100%" />
                                </div>
                                <div class="uk-width-medium-1-3 parsley-row">
                                    <label class="uk-form-label">Choose model:</label>
                                    <input ng-disabled="serviceFormVm.operationMode == 'edit' || serviceFormVm.vehicle.id" kendo-auto-complete name="wizard_model" ng-model="serviceFormVm.vehicle.model" k-data-source="serviceFormVm.countryNames" k-placeholder='"Select model ..."' class="uk-width-1-1" style="min-width: 100%" />
                                </div>
                                <div class="uk-width-medium-1-3 parsley-row">
                                    <label class="uk-form-label" for="wizard_registration">Vehicle Registration</label>
                                    <input ng-disabled="serviceFormVm.operationMode == 'edit' || serviceFormVm.vehicle.id" kendo-auto-complete k-placeholder='"e.g. GJ01AB9999"' name="wizard_registration" id="wizard_registration" ng-model="serviceFormVm.vehicle.reg" style="min-width: 100%; letter-spacing: 1px;" data-uk-tooltip="{pos: 'bottom-left', animation: 'true'}" title="Example: GJ01AB9999" />
                                </div>
                            </div>
                            <div class="uk-clearfix uk-margin-large-top">
                                <button class="md-btn md-btn-flat md-btn-flat-primary uk-float-right" id="button_vehicle_details_forward" type="submit" wz-next>Continue</button>
                            </div>
                        </wz-step>
                        <wz-step wz-title="Service information" template="app/templates/wizard.step.tpl.html" canenter="serviceFormVm.validateVehicle">
                            <div class="uk-grid" data-uk-grid-margin>
                                <div class="uk-width-medium-2-6 parsley-row">
                                    <label for="wizard_date" class="uk-form-label">Date</label>
                                    <input kendo-masked-text-box ng-model="serviceFormVm.service.date" data-uk-datepicker="{format:'DD/MM/YYYY'}" k-mask="'00/00/0000'" style="width: 100%;" id="wizard_date" name="wizard_date" data-uk-tooltip="{pos: 'top-right', animation: 'true'}" title="Format: DD/MM/YYYY" />
                                </div>
                                <div class="uk-width-medium-2-6 parsley-row">
                                    <label for="wizard_odometer" class="uk-form-label">Odometer Reading</label>
                                    <input kendo-masked-text-box type="number" name="wizard_odometer" id="wizard_odometer" ng-model="serviceFormVm.service.odo" style="width: 100%" />
                                </div>
                            </div>
                            <div class="uk-grid">&nbsp;</div>
                            <div class="uk-grid">
                                <div class="uk-width-medium-1-2 parsley-row">
                                    <h2 class="heading_a">
                                        Services Done
                                    </h2>
                                </div>
                            </div>
                            <hr class="md-hr" />
                            <div class="uk-grid" style="margin-top: 2rem;" ng-repeat="problem in serviceFormVm.service.problems" data-uk-grid-margin>
                                <div class="uk-width-medium-4-10 parsley-row">
                                    <input kendo-auto-complete ng-attr-id="{{ 'pDetails' + problem.focusIndex }}" ng-blur="serviceFormVm.updateTreatmentDetails($index, problem.focusIndex)" k-data-text-field="'name'" k-data-value-field="'name'" ng-model="problem.details" k-data-source="serviceFormVm.treatments" k-placeholder='"Treatment ..."' style="min-width: 100%" />
                                </div>
                                <div class="uk-width-medium-2-10 parsley-row">
                                    <label for="wizard_problem_rate">Rate</label>
                                    <input type="number" name="wizard_problem_rate" ng-change="serviceFormVm.updateCost()" class="md-input" md-input ng-model="problem.rate" />
                                </div>
                                <div class="uk-width-medium-1-10 parsley-row">
                                    <label for="wizard_quatity">Quantity</label>
                                    <input type="number" name="wizard_quatity" ng-change="serviceFormVm.updateCost()" class="md-input" md-input ng-model="problem.qty" />
                                </div>
                                <div class="uk-width-medium-2-10 parsley-row">
                                    <label for="wizard_problem_cost">Cost</label>
                                    <input type="number" name="wizard_problem_cost" disabled class="md-input" value="{{ problem.rate * problem.qty }}" md-input /></span>
                                </div>
                                <div class="uk-width-medium-1-10 parsley-row">
                                    <a class="md-btn md-btn-danger md-btn-wave-light" style="margin-top: 0.3rem;" ng-click="serviceFormVm.service.problems.splice($index,1); serviceFormVm.updateCost()" href="javascript:void(0)"><i class="material-icons" style="color: #FFF">delete</i></a>
                                </div>
                            </div>
                            <div class="uk-grid">
                                <div class="uk-width-medium-1-2 parsley-row">
                                    <button class="md-btn" ng-click="serviceFormVm.addProblemRow()"><i class="material-icons">add</i>&nbsp;Add Detail</button>
                                </div>
                            </div>
                            <div class="uk-grid">
                                <div class="uk-width-medium-1-2 parsley-row"></div>
                                <div class="uk-width-medium-1-4 parsley-row"></div>
                                <div class="uk-width-medium-2-10 parsley-row">
                                    <label for="wizard_cost">Total Cost&nbsp;<span class="req uk-text-danger">*</span></label>
                                    <input type="number" name="wizard_cost" id="wizard_cost" required class="md-input" md-input ng-model="serviceFormVm.service.cost" />
                                </div>
                            </div>
                            <div class="uk-grid">
                                <div class="uk-width-medium-1-1 parsley-row">
                                    <label for="wizard_details">Service Description</label>
                                    <textarea class="md-input" ng-model="serviceFormVm.service.details" name="wizard_details" id="wizard_details" md-input textarea-autosize></textarea>
                                </div>
                            </div>
                            <div class="uk-clearfix uk-margin-large-top">
                                <button class="md-btn md-btn-flat md-btn-flat-primary uk-float-right" type="submit" wz-next>Save</button>
                            </div>
                        </wz-step>
                    </wizard>

                </form>
            </div>
        </div>

    </div>
</div>