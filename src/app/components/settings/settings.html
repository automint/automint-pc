<style>
    .am-logged-in-as {
        font-size: small;
        vertical-align: middle;
    }
</style>

<md-content>
    <md-tabs md-dynamic-height md-border-bottom>
        <md-tab label="Invoice Settings">
            <md-content class="md-padding" layout-xs="column" layout="row">
                <div flex-xs flex-gt-xs="50" layout="column">
                    <md-card>
                        <md-card-title layout-xs="column">
                            <md-card-title-text>
                                <span class="md-title">Workshop Details</span>
                            </md-card-title-text>
                        </md-card-title>
                        <md-card-content layout="row" layout-wrap layout-margin>
                            <md-input-container flex-gt-xs>
                                <md-icon class="md-accent">domain</md-icon>
                                <label class="am-form-label" ng-class="{'large': vm.isWorkshopName}">{{vm.label_workshopName}}</label>
                                <input class="md-body-1" type="text" ng-model="vm.workshop.name" ng-blur="vm.changeWorkshopNameLabel()" ng-focus="vm.changeWorkshopNameLabel(true)">
                            </md-input-container>
                            <md-input-container flex-gt-xs>
                                <md-icon class="md-accent">phone</md-icon>
                                <label class="am-form-label" ng-class="{'large': vm.isWorkshopPhone}">{{vm.label_workshopPhone}}</label>
                                <input class="md-body-1" type="text" ng-model="vm.workshop.phone" ng-blur="vm.changeWorkshopPhoneLabel();" ng-focus="vm.changeWorkshopPhoneLabel(true)">
                            </md-input-container>
                            <md-input-container flex="100">
                                <md-icon class="md-accent">location_on</md-icon>
                                <label class="am-form-label" ng-class="{'large': vm.isWorkshopAddress1}">{{vm.label_workshopAddress1}}</label>
                                <input class="md-body-1" type="text" ng-model="vm.workshop.address1" ng-blur="vm.changeWorkshopAddress1Label();" ng-focus="vm.changeWorkshopAddress1Label(true)">
                            </md-input-container>
                            <md-input-container flex="100">
                                <md-icon class="md-accent">location_on</md-icon>
                                <label class="am-form-label" ng-class="{'large': vm.isWorkshopAddress2}">{{vm.label_workshopAddress2}}</label>
                                <input class="md-body-1" type="text" ng-model="vm.workshop.address2" ng-blur="vm.changeWorkshopAddress2Label();" ng-focus="vm.changeWorkshopAddress2Label(true)">
                            </md-input-container>
                            <md-input-container flex="100">
                                <md-icon class="md-accent">location_city</md-icon>
                                <label class="am-form-label" ng-class="{'large': vm.isWorkshopCity}">{{vm.label_workshopCity}}</label>
                                <input class="md-body-1" type="text" ng-model="vm.workshop.city" ng-blur="vm.changeWorkshopCityLabel();" ng-focus="vm.changeWorkshopCityLabel(true)">
                            </md-input-container>
                        </md-card-content>
                        <md-card-actions layout="row" layout-align="end center">
                            <md-switch dir="rtl" ng-model="vm.ivSettings.display.workshopDetails" ng-change="vm.saveIvDisplaySettings()">
                                <span layout-padding class="am-form-label">Display in Invoice</span>
                            </md-switch>
                            <md-button class="md-warn" ng-click="vm.saveWorkshopDetails()">
                                <md-icon>done</md-icon>
                                <span layout-padding>Save</span>
                            </md-button>
                        </md-card-actions>
                    </md-card>
                </div>
                <div flex-xs flex-gt-xs="50" layout="column">
                    <md-card>
                        <md-card-title layout-xs="column">
                            <md-card-title-text>
                                <span class="md-title">Current Invoicing Status</span>
                            </md-card-title-text>
                        </md-card-title>
                        <md-card-content>
                            <div layout="row" layout-xs="column">
                                <div layout="column" layout-align="center start" flex>
                                    <span><span class="am-form-label">Last Invoice Number: </span><span class="md-body-1">{{vm.ivSettings.lastInvoiceNumber}}</span></span>
                                </div>
                                <div layout="column" layout-align="center end" flex>
                                    <md-button class="md-accent" ng-click="vm.resetLastInvoiceNo()">
                                        <span layout-padding>Reset</span>
                                    </md-button>
                                </div>
                            </div>
                        </md-card-content>
                    </md-card>
                    <md-card>
                        <md-card-title layout-xs="column" layout-align="center center" layout-wrap>
                            <md-card-title-text>
                                <span class="md-title">Workshop Logo</span>
                            </md-card-title-text>
                        </md-card-title>
                        <md-card-content layout="column" layout-align="center center" layout-margin layout-wrap>
                            <img ng-src="{{vm.invoiceWLogo}}" id="am-invoice-w-logo">
                        </md-card-content>
                        <input type="file" id="am-upload-invoice-w-logo" am-upload-files="vm.changeInvoiceWLogo" ng-hide="true">
                        <md-card-actions layout="row" layout-align="end center">
                            <md-switch dir="rtl" ng-model="vm.ivSettings.display.workshopLogo" ng-change="vm.saveIvDisplaySettings()">
                                <span layout-padding class="am-form-label">Display in Invoice</span>
                            </md-switch>
                            <md-button class="md-accent" ng-click="vm.uploadInvoiceWLogo()">
                                <md-icon>collections</md-icon>
                                <span layout-padding>Change</span>
                            </md-button>
                        </md-card-actions>
                    </md-card>
                </div>
            </md-content>
        </md-tab>
        <md-tab label="General Settings">
            <md-content class="md-padding" layout-xs="column" layout="row">
                <div flex-xs flex-gt-xs="50" layout="column">
                    <md-card>
                        <md-card-title>
                            <md-card-title-text>
                                <span class="md-title">Import</span>
                                <span class="md-subhead">Add customers and their vehicle data (in CSV format).</span>
                            </md-card-title-text>
                        </md-card-title>
                        <md-card-content>
                            <div layout="column" am-drop-files="vm.handleUploadedFile" class="am-file-uploader" layout-align="center center">
                                <md-button class="md-raised" ng-click="vm.uploadCSV()">
                                    <span layout-padding>Click to upload</span>
                                </md-button>
                                <input type="file" am-upload-files="vm.handleUploadedFile" id="csv-file-select"> or
                                <br>Drop CSV File
                            </div>
                            <md-progress-linear md-mode="determinate" value="{{vm.currentCsvProgress}}" ng-show="vm.isCsvProcessed"></md-progress-linear>
                            <div layout="column" layout-margin>
                                <span class="md-body-1">First row of the CSV file must be the header row, divided into fields like this: name, mobile, registration, manufacturer, model.</span>
                            </div>
                        </md-card-content>
                    </md-card>
                </div>
                <div flex-xs flex-gt-xs="50" layout="column">
                    <md-card>
                        <md-card-title layout-xs="column" layout-align="center center">
                            <md-card-title-text>
                                <span class="md-title">Backup Your Data</span>
                            </md-card-title-text>
                            <md-button class="md-raised" ng-click="vm.doBackup()">
                                <md-icon>file_download</md-icon>
                                <span layout-padding>Download</span>
                            </md-button>
                        </md-card-title>
                    </md-card>
                    <md-card ng-hide="true">
                        <md-card-title>
                            <md-card-title-text>
                                <span class="md-title">{{vm.label_login}}<span ng-show="vm.isLoggedIn" class="am-logged-in-as"> as {{vm.user.username}}</span></span>
                            </md-card-title-text>
                        </md-card-title>
                        <md-card-content ng-hide="vm.isLoggedIn">
                            <div layout-gt-xs="row" layout-wrap layout-margin>
                                <md-input-container class="md-block" flex-gt-xs>
                                    <md-icon class="md-accent">person_pin</md-icon>
                                    <label class="am-form-label" ng-class="{'large': vm.isUsername}">{{vm.label_username}}</label>
                                    <input type="text" ng-model="vm.user.username" ng-blur="vm.changeUsernameLabel()" ng-focus="vm.changeUsernameLabel(true)">
                                </md-input-container>
                                <md-input-container class="md-block" flex-gt-xs>
                                    <md-icon class="md-accent">vpn_key</md-icon>
                                    <label class="am-form-label" ng-class="{'large': vm.isPassword}">{{vm.label_password}}</label>
                                    <input type="password" ng-model="vm.user.password" ng-blur="vm.changePasswordLabel()" ng-focus="vm.changePasswordLabel(true)">
                                </md-input-container>
                            </div>
                            <div layout="column" layout-align="center end">
                                <md-button class="md-raised" ng-click="vm.doLogin()">
                                    <md-icon>send</md-icon>
                                    <span layout-padding>Login</span>
                                </md-button>
                            </div>
                        </md-card-content>
                    </md-card>
                    <md-card>
                        <md-card-title layout-xs="column">
                            <md-card-title-text>
                                <span class="md-title">Cover Photo</span>
                                <span class="md-subhead">Size of photo should be 250x125px (WxH)</span>
                            </md-card-title-text>
                            <md-button class="md-raised" ng-click="vm.uploadCover()">
                                <span layout-padding>Change</span>
                            </md-button>
                            <input type="file" id="am-upload-cover-pic" am-upload-files="vm.handleUploadedCoverPic" ng-hide="true">
                        </md-card-title>
                    </md-card>
                </div>
            </md-content>
        </md-tab>
    </md-tabs>
</md-content>