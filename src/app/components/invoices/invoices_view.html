<style>
    .am-floating {
        background: transparent;
        z-index: 999;
        position: fixed;
        bottom: 1.6rem;
    }
    
    .am-floating.am-right {
        right: 0.3rem;
    }
</style>
<md-content layout="row" layout-xs="column" layout-margin>
    <md-button aria-label="Back" class="md-fab md-raised md-mini" ng-click="vm.goBack()">
        <md-icon aria-label="Back">arrow_back</md-icon>
        <md-tooltip md-direction="top">Back</md-tooltip>
    </md-button>
    <div flex></div>
    <md-button aria-label="Email" class="md-fab md-raised md-mini" ng-click="vm.mailInvoice()">
        <md-icon aria-label="Email">email</md-icon>
        <md-tooltip md-direction="top">Email</md-tooltip>
    </md-button>
    <md-button aria-label="Print" class="md-fab md-raised md-mini" ng-click="vm.printInvoice()">
        <md-icon aria-label="Print">print</md-icon>
        <md-tooltip md-direction="top">Print</md-tooltip>
    </md-button>
    <md-button aria-label="SMS" class="md-fab md-raised md-mini" ng-hide="true">
        <md-icon aria-label="SMS">sms</md-icon>
        <md-tooltip md-direction="top">SMS</md-tooltip>
    </md-button>
    <md-button aria-label="Edit Info" class="md-fab md-raised md-mini" ng-click="vm.editService()">
        <md-icon aria-label="Edit Info">edit</md-icon>
        <md-tooltip md-direction="top">Edit Service</md-tooltip>
    </md-button>
</md-content>
<md-content class="md-hue-1">
    <div id="am-invoice-mail-body">
        <div id="am-invoice-body" style="box-shadow: 1px 1px 3px rgba(30,30,30,0.3); padding:1rem; margin: 0.1rem;">
            <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
            <html xmlns="http://www.w3.org/1999/xhtml" style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; box-sizing: border-box; margin: 0;">

            <head>
                <meta name="viewport" content="width=device-width" />
                <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
                <title>Invoice #{{vm.service.invoiceno}}</title>
                <style>
                    .am-invoice-table {
                        border-collapse: collapse;
                        width: 94%;
                    }
                    
                    .am-invoice-table td {
                        font-size: small;
                        padding: 1rem;
                    }
                    
                    .am-invoice-table .m-d {
                        padding: 1rem 1rem 0.3rem 1rem !important;
                    }
                    
                    .am-invoice-table .m-dt {
                        padding: 0.3rem 1rem 0.3rem 1rem !important;
                        font-size: 9pt;
                    }
                    .am-invoice-table .m-dtl {
                        padding: 0.3rem 1rem 1rem 1rem !important;
                        font-size: 9pt;
                    }
                    
                    .am-invoice-table .caption td {
                        font-size: small;
                    }
                    
                    .am-invoice-table .row td {
                        border-top: 1px solid #ECEFF1;
                    }
                    
                    .am-invoice-table .total td {
                        border-top: 1px solid #ECEFF1;
                        font-weight: 800;
                        padding: 0.5rem 1rem 1rem 1rem !important;
                    }
                    
                    .am-invoice-table .tax td {
                        border-top: 2px solid #37474F;
                        padding: 1rem 1rem 0.5rem 1rem !important;
                    }
                    
                    .am-invoice-link {
                        text-decoration: underline;
                        color: #03A9F4;
                        cursor: pointer;
                        outline: none;
                    }
                    
                    .am-invoice-workshop-detail {
                        font-size: small;
                    }
                    
                    .am-invoice-w-area {
                        font-family: 'Helvetica Neue',Helvetica,Arial,sans-serif;
                        width: 100%;
                    }
                    
                    .am-invoice-w-area .parent {
                        display: flex;
                        align-items: center;
                    }
                    
                    .am-invoice-w-area .parent .left {
                        padding-left: 2rem;
                    }
                    
                    .am-invoice-w-area .parent .right {
                        padding-right: 2rem;
                    }
                </style>
            </head>

            <body style="font-family: 'Helvetica Neue',Helvetica,Arial,sans-serif;">
                <section class="am-invoice-w-area">
                    <div class="parent">
                        <div class="left">
                            <h2 style="margin-bottom: 0.3rem; margin: 1px;">{{vm.workshop.name}}</span><span class="am-blank-padding">&nbsp;</span></h2>
                            <span class="am-invoice-workshop-detail">{{vm.workshop.address1}}<span class="am-blank-padding">&nbsp;</span></span><br>
                            <span class="am-invoice-workshop-detail">{{vm.workshop.address2}}<span class="am-blank-padding">&nbsp;</span></span><br>
                            <span class="am-invoice-workshop-detail">{{vm.workshop.city}}<span class="am-blank-padding">&nbsp;</span></span><br>
                            <span class="am-invoice-workshop-detail"><span style="font-size: x-small;">{{vm.workshop.label_phone}}</span> {{vm.workshop.phone}}<span class="am-blank-padding">&nbsp;</span></span>
                        </div>
                        <div style="flex-grow: 1"></div>
                        <div class="right" id="am-invoice-w-logo-holder"></div>
                    </div>
                </section>
                <hr style="margin-top: 1.6rem; margin-bottom: 1rem; opacity: 0.3">
                <section style="font-family: 'Helvetica Neue',Helvetica,Arial,sans-serif; margin: 1rem;">
                    <center>
                        <table class="am-invoice-table">
                            <tr class="caption">
                                <td>
                                    <p style="font-size: large">{{vm.user.name}}</p>
                                    <span><span>{{vm.vehicle.manuf + ' ' + vm.vehicle.model}}</span><br><span style="line-height: 1.4; font-size: smaller; letter-spacing: 0.2px" ng-if="vm.vehicle.reg">{{vm.vehicle.reg}}</span></span>
                                </td>
                                <td style="text-align: right">
                                    <p style="text-align: right; font-size: large">Invoice #{{vm.service.invoiceno}}</p>
                                    <span>{{vm.service.date}}</span>
                                </td>
                            </tr>
                            <tr class="caption">
                                <td><span style="font-weight: 700">Treatments</span></td>
                                <td style="text-align: right"><span style="font-weight: 700">Amount</span></td>
                            </tr>
                            <tr class="row" ng-repeat-start="(key, membership) in vm.service.memberships">
                                <td class="m-d">{{key}}</td>
                                <td align="right" class="m-d">&nbsp;</td>
                            </tr>
                            <tr ng-repeat-end ng-repeat="(tn, treatment) in membership.treatments">
                                <td ng-class="{'m-dt': !$last, 'm-dtl': $last}"><span style="margin-left: 1rem;"> - {{tn}}</span></td>
                                <td align="right" ng-class="{'m-dt': !$last, 'm-dtl': $last}">&nbsp;</td>
                            </tr>
                            <tr class="row" ng-repeat-start="package in vm.service.packages">
                                <td class="m-d">{{package.name}}</td>
                                <td class="m-d" align="right">&nbsp;</td>
                            </tr>
                            <tr ng-repeat-end ng-repeat="treatment in package.treatments">
                                <td ng-class="{'m-dt': !$last, 'm-dtl': $last}"><span style="margin-left: 1rem;"> - {{treatment.name}}</span></td>
                                <td align="right" ng-class="{'m-dt': !$last, 'm-dtl': $last}">Rs. {{treatment.rate | number: (vm.sTaxSettings.applyTax) ? ((vm.sTaxSettings.inclusive) ? 2 : 0) : 0}}</td>
                            </tr>
                            <tr class="row" ng-repeat="problem in vm.service.problems">
                                <td>{{problem.details}}</td>
                                <td align="right">Rs. {{problem.rate | number: (vm.sTaxSettings.applyTax) ? ((vm.sTaxSettings.inclusive) ? 2 : 0) : 0}}</td>
                            </tr>
                            <tr class="tax" ng-if="vm.sTaxSettings.applyTax">
                                <td>Service Tax ({{vm.sTaxSettings.tax}}%)</td>
                                <td align="right">Rs. {{vm.calculateServiceTax() | number: (vm.sTaxSettings.applyTax) ? ((vm.sTaxSettings.inclusive) ? 2 : 0) : 0}}</td>
                            </tr>
                            <tr class="total" ng-class="{'tax': !vm.sTaxSettings.applyTax}">
                                <td>Total</td>
                                <td align="right">Rs. {{vm.service.cost | number: (vm.sTaxSettings.applyTax) ? ((vm.sTaxSettings.inclusive) ? 2 : 0) : 0}}</td>
                            </tr>
                        </table>
                    </center>
                </section>
            </body>

            </html>
        </div>
    </div>
</md-content>