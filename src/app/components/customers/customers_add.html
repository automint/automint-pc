<style>
    .md-datepicker-button {
        margin: 0 !important;
    }

    .md-datepicker-input-container {
        margin-left: 0 !important;
    }

    .md-datepicker-input-container .md-datepicker-input, .md-datepicker-triangle-button {
        display: none;
    }
</style>
<md-button aria-label="Back" class="md-fab md-raised md-mini am-back-button" ng-click="vm.goBack()">
    <md-icon aria-label="Back">arrow_back</md-icon>
</md-button>
<md-content class="md-hue-1 am-box-shadow">
    <md-tabs md-dynamic-height md-border-bottom class="am-tab-margin">
        <md-tab label="Customer Information" md-active="vm.userTab" md-on-deselect="vm.changeUserTab(false)">
            <md-content layout-padding class="md-hue-1">
                <div layout="column">
                    <div layout-gt-xs="row" layout-wrap layout-margin>
                        <md-input-container class="am-clear-error-spacer"flex-gt-xs>
                            <md-icon class="md-accent">person_pin</md-icon>
                            <label class="am-form-label" ng-class="{'large': vm.isUserName}">{{vm.label_userName}}</label>
                            <input id="ami-customer-name" autofocus id="ami-user-name" type="text" ng-model="vm.user.name" ng-change="vm.convertNameToTitleCase()" ng-blur="vm.changeUserNameLabel()" ng-focus="vm.changeUserNameLabel(true)">
                        </md-input-container>
                    </div>
                    <div layout-gt-xs="row" layout-wrap layout-margin>
                        <md-input-container class="am-clear-error-spacer"flex-gt-xs>
                            <md-icon class="md-accent">phone</md-icon>
                            <label class="am-form-label" ng-class="{'large': vm.isUserMobile}">{{vm.label_userMobile}}</label>
                            <input id="ami-customer-mobile" layout-padding type="text" ng-model="vm.user.mobile" ng-blur="vm.changeUserMobileLabel(); vm.checkExistingCustomerMobile($event)" ng-focus="vm.changeUserMobileLabel(true)">
                        </md-input-container>
                        <md-input-container class="am-clear-error-spacer"flex-gt-xs>
                            <md-icon class="md-accent">email</md-icon>
                            <label class="am-form-label" ng-class="{'large': vm.isUserEmail}">{{vm.label_userEmail}}</label>
                            <input type="email" ng-model="vm.user.email" ng-blur="vm.changeUserEmailLabel()" ng-focus="vm.changeUserEmailLabel(true)">
                        </md-input-container>
                    </div>
                    <div layout-gt-xs="row" layout-wrap layout-margin>
                        <md-input-container flex-gt-xs>
                            <md-icon class="md-accent">home</md-icon>
                            <label class="am-form-label" ng-class="{'large': vm.isUserAddress}">{{vm.label_userAddress}}</label>
                            <textarea ng-model="vm.user.address" md-maxlength="150" rows="5" md-select-on-focus ng-change="vm.autoCapitalizeCustomerAddress()" ng-blur="vm.changeUserAddressLabel()" ng-focus="vm.changeUserAddressLabel(true)"></textarea>
                        </md-input-container>
                    </div>
                </div>
                <div layout="row" layout-align="end center">
                    <div layout="row" layout-align="center center" ng-show="vm.loadingBasedOnMobile" flex>
                        <md-progress-circular md-mode="indeterminate"></md-progress-circular>
                        <span>Please wait</span>
                    </div>
                    <md-button class="md-raised md-warn" ng-click="vm.save()">
                        <md-icon>done</md-icon>
                        <span layout-padding>Save</span>
                    </md-button>
                    <md-button class="md-raised" ng-click="vm.changeVehicleTab(true)">
                        <span layout-padding>Add Vehicle</span>
                        <md-icon>navigate_next</md-icon>
                    </md-button>
                </div>
            </md-content>
        </md-tab>
        <md-tab label="Vehicle Information" md-active="vm.vehicleTab" md-on-deselect="vm.changeVehicleTab(false)">
            <md-content layout-padding class="md-hue-1">
                <div layout="column">
                    <div layout-gt-xs="row" layout-wrap layout-margin>
                        <div layout="column" flex>
                            <span class="am-form-label">Choose Manufacturer:</span>
                            <md-autocomplete md-selected-item="vm.selectedManuf" md-search-text="vm.vehicle.manuf" md-items="manuf in vm.manufacturersQuerySearch()" md-item-text="manuf" placeholder="Type Manufacturer Name" md-search-text-change="vm.searchVehicleChange(true)">
                                <md-item-template>
                                    <span md-highlight-text="vm.vehicle.manuf">{{manuf}}</span>
                                </md-item-template>
                            </md-autocomplete>
                        </div>
                        <div layout="column" flex>
                            <span class="am-form-label">Choose Model:</span>
                            <md-autocomplete md-selected-item="vm.selectedModel" md-search-text="vm.vehicle.model" md-items="model in vm.modelQuerySearch()" md-item-text="model" placeholder="Type Model Name" md-no-cache="true" md-min-length="0" md-search-text-change="vm.autoCapitalizeVehicleModel()">
                                <md-item-template>
                                    <span md-highlight-text="vm.vehicle.model">{{model}}</span>
                                </md-item-template>
                            </md-autocomplete>
                        </div>
                    </div>
                    <div layout-gt-xs="row" layout-wrap layout-margin>
                        <md-input-container class="md-block" flex-gt-xs="50">
                            <label class="am-form-label" ng-class="{'large': vm.isVehicleReg}">{{vm.label_vehicleReg}}</label>
                            <input type="text" class="am-vehicle-reg" ng-model="vm.vehicle.reg" ng-change="vm.convertRegToCaps()" ng-blur="vm.changeVehicleRegLabel()" ng-focus="vm.changeVehicleRegLabel(true)">
                            <div class="am-hint">e.g. <span class="spacing-1p bold-500">GJ01AB9999</span></div>
                        </md-input-container>
                        <div layout="row" layout-align="start center">
                            <md-checkbox aria-label="Next Due" ng-model="vm.isNextDueService" style="margin-bottom: 0"><span class="md-body-2">Next Service Reminder<span ng-show="vm.isNextDueService" class="md-caption">:</span></span></md-checkbox>
                            <div layout="row" layout-align="start center" ng-show="vm.isNextDueService">
                                <md-datepicker class="md-hue-1" ng-model="vm.nextDueDate" md-placeholder="Enter Date" style="margin: 0 0 0 -0.2rem; padding-right: 0" md-open-on-focus></md-datepicker>
                                <span style="font-size: 10pt; padding-top: 2px">{{vm.getDate(vm.nextDueDate)}}</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div layout="row" layout-align="end center">
                    <md-button class="md-raised md-warn" ng-click="vm.save()">
                        <md-icon>done</md-icon>
                        <span layout-padding>Save</span>
                    </md-button>
                    <md-button class="md-raised" ng-click="vm.changeMembershipTab(true)">
                        <span layout-padding>Add Memberships</span>
                        <md-icon>navigate_next</md-icon>
                    </md-button>
                </div>
            </md-content>
        </md-tab>
        <md-tab label="Membership Information" md-active="vm.membershipTab" md-on-deselect="vm.changeMembershipTab(false)">
            <md-content class="md-hue-1">
                <div layout="column">
                    <div layout="row" layout-align="start center"  layout-margin>
                        <md-icon class="md-accent">card_membership</md-icon>
                        <div layout="column" layout-align="start" flex>
                            <md-chips ng-model="vm.membershipChips" md-autocomplete-snap ng-click="vm.OnClickMembershipChip($event)" md-on-add="vm.OnAddMembershipChip($chip)" md-on-remove="vm.unsubscribeMembership($event, $chip)" md-require-match="true">
                                <md-autocomplete id="am-add-membership-chips" md-selected-item="vm.selectedMembershipChip" md-search-text="vm.membershipChipText" md-items="membership in vm.queryMembershipChip()" md-item-text="membership.name" placeholder="Assign Memberships">
                                    <span md-highlight-text="vm.membershipChipText">{{membership.name}}</span>
                                </md-autocomplete>
                                <md-chip-template>
                                    <span>
                                    <span style="font-size: small">{{$chip.name}}</span>
                                    </span>
                                </md-chip-template>
                            </md-chips>
                        </div>
                    </div>
                    <span class="md-caption" style="margin-left: 3rem; line-height: 2rem"><address>*&nbsp;Click on Membership for details</address></span>
                </div>
                <div layout="row" layout-align="end center">
                    <md-button class="md-raised md-warn" ng-click="vm.save()">
                        <md-icon>done</md-icon>
                        <span layout-padding>Save</span>
                    </md-button>
                </div>
            </md-content>
        </md-tab>
    </md-tabs>
</md-content>